# WYLM 个人网站产品需求文档 (PRD)

## 1. 项目概述

### 1.1 项目名称
WYLM 个人网站

### 1.2 项目定位
一个集门户展示、博客创作、摄影作品展示、产品推广于一体的综合性个人网站平台，支持用户注册登录、内容互动和商业化功能。

### 1.3 技术栈
- **前端**: Next.js 14+ (App Router), React 18+, TypeScript, Tailwind CSS
- **后端**: Node.js, Express/Next.js API Routes
- **数据库**: PostgreSQL
- **认证**: NextAuth.js / JWT
- **支付**: 微信支付 + 支付宝
- **部署**: Docker + Nginx, CDN加速
- **存储**: 阿里云OSS / AWS S3（图片、视频）

### 1.4 目标用户
- **网站所有者**: 发布内容、管理网站、获取收益
- **内容编辑者**: 协助管理博客、摄影作品、产品信息
- **注册用户**: 浏览内容、评论互动、赞赏支持
- **游客**: 浏览公开内容

---

## 2. 用户角色与权限

### 2.1 角色定义

| 角色 | 权限范围 | 主要功能 |
|------|---------|---------|
| **超级管理员** | 全部权限 | 系统配置、用户管理、内容管理、数据统计 |
| **内容编辑者** | 内容管理权限 | 发布/编辑博客、管理摄影作品、更新产品信息 |
| **普通用户** | 浏览+互动权限 | 浏览内容、评论、点赞、赞赏 |
| **游客** | 仅浏览权限 | 浏览公开内容（部分内容需登录） |

### 2.2 权限矩阵

| 功能模块 | 超级管理员 | 内容编辑者 | 普通用户 | 游客 |
|---------|-----------|-----------|---------|------|
| 系统配置 | ✅ | ❌ | ❌ | ❌ |
| 用户管理 | ✅ | ❌ | ❌ | ❌ |
| 博客管理 | ✅ | ✅ | ❌ | ❌ |
| 摄影作品管理 | ✅ | ✅ | ❌ | ❌ |
| 产品管理 | ✅ | ✅ | ❌ | ❌ |
| 评论管理 | ✅ | ✅ | ❌ | ❌ |
| 浏览内容 | ✅ | ✅ | ✅ | ✅（部分） |
| 评论互动 | ✅ | ✅ | ✅ | ❌ |
| 点赞收藏 | ✅ | ✅ | ✅ | ❌ |
| 赞赏支付 | ✅ | ✅ | ✅ | ❌ |

---

## 3. 功能模块详细设计

## 3.1 门户主页

### 3.1.1 设计参考
参考网站: https://zhheo.com/

### 3.1.2 核心功能
- **瀑布流布局**: 使用滑动瀑布流展示各个模块卡片
- **模块卡片**:
  - 个人介绍卡片（头像、简介、社交链接）
  - 博客精选卡片（最新/热门文章预览）
  - 摄影作品卡片（精选作品展示）
  - 产品推广卡片（各产品入口）
  - 统计数据卡片（访问量、文章数、作品数）
  - 技能标签云
  - 时间线/动态卡片

### 3.1.3 交互特性
- 卡片悬停动效
- 平滑滚动加载
- 响应式布局（移动端自适应）
- 暗黑模式切换

### 3.1.4 后台管理功能
- 模块显示/隐藏配置
- 模块排序调整（拖拽排序）
- 卡片内容编辑
- 主题色配置
- SEO设置（标题、描述、关键词）

### 3.1.5 技术实现
- 使用 `react-masonry-css` 或 `react-grid-layout` 实现瀑布流
- 使用 `framer-motion` 实现动画效果
- 使用 `Intersection Observer API` 实现懒加载

---

## 3.2 个人博客页

### 3.2.1 设计参考
参考网站: https://blog.zhheo.com/

### 3.2.2 核心功能

#### 前台功能
1. **文章列表页**
   - 文章卡片展示（标题、摘要、封面、标签、发布时间、阅读量）
   - 分类筛选
   - 标签筛选
   - 搜索功能
   - 分页/无限滚动

2. **文章详情页**
   - Markdown渲染（支持代码高亮、数学公式、图表）
   - 目录导航（TOC）
   - 阅读进度条
   - 点赞功能
   - 评论系统
   - 赞赏功能（微信/支付宝二维码）
   - 分享功能（微信、微博、Twitter）
   - 相关文章推荐
   - 上一篇/下一篇导航

3. **侧边栏**
   - 热门文章（按阅读量/点赞数）
   - 最新文章
   - 分类列表
   - 标签云
   - 归档（按年月）
   - 搜索框

#### 后台管理功能
1. **文章管理**
   - 文章列表（支持筛选、搜索、批量操作）
   - 新建/编辑文章（Markdown编辑器）
   - 文章状态（草稿、已发布、已下架）
   - 文章置顶
   - 定时发布
   - 文章统计（阅读量、点赞数、评论数）

2. **分类管理**
   - 新增/编辑/删除分类
   - 分类排序
   - 分类图标设置

3. **标签管理**
   - 新增/编辑/删除标签
   - 标签合并
   - 标签使用统计

4. **评论管理**
   - 评论审核
   - 评论回复
   - 评论删除/屏蔽
   - 敏感词过滤

5. **热门文章配置**
   - 手动设置热门文章
   - 自动推荐规则配置

### 3.2.3 技术实现
- Markdown编辑器: `react-markdown-editor-lite` 或 `@uiw/react-md-editor`
- Markdown渲染: `react-markdown` + `remark-gfm` + `rehype-highlight`
- 代码高亮: `prism.js` 或 `highlight.js`
- 评论系统: 自建评论系统（支持嵌套回复）
- 搜索: PostgreSQL全文搜索 或 Elasticsearch

---

## 3.3 摄影作品展示画廊页

### 3.3.1 设计参考
参考网站: https://gallery.angyi.online/browse

### 3.3.2 核心功能

#### 前台功能
1. **画廊浏览**
   - 瀑布流/网格布局展示
   - 图片懒加载
   - 图片预览（Lightbox）
   - 图片信息（标题、描述、拍摄参数、拍摄时间）
   - 分类筛选
   - 标签筛选
   - 排序（时间、热度）

2. **图片详情**
   - 高清大图展示
   - EXIF信息展示（相机型号、镜头、光圈、快门、ISO、焦距）
   - 拍摄地点（地图展示）
   - 点赞/收藏
   - 评论
   - 上一张/下一张导航
   - 下载功能（可配置是否允许）

3. **相册集合**
   - 按主题/系列组织作品
   - 相册封面
   - 相册描述

#### 后台管理功能
1. **作品管理**
   - 批量上传（支持拖拽）
   - 图片编辑（标题、描述、标签、分类）
   - 图片裁剪/压缩
   - 水印添加
   - 作品排序
   - 作品删除

2. **分类管理**
   - 新增/编辑/删除分类
   - 分类图标设置
   - 分类排序

3. **相册管理**
   - 创建/编辑/删除相册
   - 相册封面设置
   - 作品添加到相册

4. **EXIF管理**
   - 自动提取EXIF信息
   - 手动编辑EXIF信息
   - 隐私信息过滤（GPS坐标）

### 3.3.3 技术实现
- 图片上传: `react-dropzone`
- 图片预览: `react-photo-view` 或 `yet-another-react-lightbox`
- 图片处理: `sharp` (服务端)
- EXIF提取: `exif-js` 或 `exifr`
- 图片存储: 阿里云OSS / AWS S3
- CDN加速: 阿里云CDN / CloudFlare

---

## 3.4 产品介绍页

### 3.4.1 设计参考
参考网站: https://kafka.apache.org/

### 3.4.2 核心功能

#### 前台功能
1. **产品列表**
   - 产品卡片展示
   - 产品分类
   - 搜索功能

2. **产品详情页**
   - **Hero区域**: 产品名称、Slogan、主要特性、CTA按钮
   - **产品简介**: 详细介绍产品功能和优势
   - **演示Demo**:
     - 视频演示（支持YouTube/Bilibili嵌入）
     - 图片轮播
     - 在线Demo链接
   - **功能特性**: 分模块展示核心功能
   - **使用案例**: 真实用户案例展示
   - **技术架构**: 技术栈、系统架构图
   - **订阅价格**:
     - 价格表格（免费版、基础版、专业版、企业版）
     - 功能对比
     - 支付按钮（跳转支付页面）
   - **FAQ**: 常见问题解答
   - **联系方式**: 咨询入口

3. **订阅购买流程**
   - 选择套餐
   - 填写信息（邮箱、手机号）
   - 支付（微信/支付宝）
   - 订单确认
   - 发送订阅凭证（邮件/短信）

#### 后台管理功能
1. **产品管理**
   - 新增/编辑/删除产品
   - 产品状态（上架/下架）
   - 产品排序
   - SEO设置

2. **价格管理**
   - 套餐配置
   - 价格设置
   - 功能对比配置
   - 优惠活动设置

3. **订单管理**
   - 订单列表
   - 订单详情
   - 订单状态（待支付、已支付、已取消、已退款）
   - 退款处理

4. **案例管理**
   - 添加/编辑/删除案例
   - 案例排序

### 3.4.3 技术实现
- 视频播放: `react-player`
- 图片轮播: `swiper`
- 支付集成:
  - 微信支付: 官方SDK
  - 支付宝: 官方SDK
- 订单系统: 自建订单表 + 支付回调处理

---

## 3.5 用户认证系统

### 3.5.1 注册功能
- **手机号注册**:
  - 手机号验证（格式校验）
  - 短信验证码发送（阿里云短信服务）
  - 验证码校验（5分钟有效期）
  - 密码设置（强度校验）
  - 用户协议确认

- **第三方登录**（可选）:
  - 微信登录
  - QQ登录
  - GitHub登录

### 3.5.2 登录功能
- 手机号+密码登录
- 手机号+验证码登录
- 记住登录状态（7天/30天）
- 忘记密码（短信验证码重置）

### 3.5.3 用户中心
- 个人信息编辑（头像、昵称、简介）
- 密码修改
- 手机号绑定/解绑
- 我的评论
- 我的点赞
- 我的收藏
- 我的订单
- 账号注销

### 3.5.4 技术实现
- 认证方案: NextAuth.js 或 JWT
- 短信服务: 阿里云短信服务
- 密码加密: bcrypt
- Session管理: Redis

---

## 3.6 后台管理系统

### 3.6.1 系统概览
- **仪表盘**:
  - 访问统计（今日/本周/本月）
  - 用户统计（新增用户、活跃用户）
  - 内容统计（文章数、作品数、产品数）
  - 收入统计（赞赏收入、订阅收入）
  - 热门内容排行

### 3.6.2 用户管理
- 用户列表（搜索、筛选、分页）
- 用户详情（基本信息、活动记录）
- 角色分配
- 用户禁用/启用
- 批量操作

### 3.6.3 内容管理
- 博客管理（见3.2.2）
- 摄影作品管理（见3.3.2）
- 产品管理（见3.4.2）
- 评论管理（审核、删除、回复）

### 3.6.4 系统配置
- **网站设置**:
  - 网站名称、Logo、Favicon
  - SEO配置（标题、描述、关键词）
  - 社交链接（微信、微博、GitHub、Twitter）
  - 统计代码（Google Analytics、百度统计）

- **功能开关**:
  - 评论功能开关
  - 赞赏功能开关
  - 注册功能开关
  - 第三方登录开关

- **支付配置**:
  - 微信支付配置（商户号、密钥）
  - 支付宝配置（APPID、密钥）
  - 赞赏二维码上传

- **邮件配置**:
  - SMTP服务器配置
  - 邮件模板配置

- **短信配置**:
  - 阿里云短信配置
  - 短信模板配置

### 3.6.5 数据统计
- 访问统计（PV、UV、来源分析）
- 用户行为分析（浏览、点赞、评论、赞赏）
- 内容分析（热门文章、热门作品）
- 收入分析（赞赏收入、订阅收入）
- 导出报表

### 3.6.6 技术实现
- 后台UI框架: Ant Design 或 Shadcn UI
- 图表库: ECharts 或 Recharts
- 权限控制: RBAC（基于角色的访问控制）
- 操作日志: 记录所有管理操作

---

## 4. 数据库设计

### 4.1 核心数据表

#### 用户相关
- `users` - 用户表
- `roles` - 角色表
- `user_roles` - 用户角色关联表
- `permissions` - 权限表
- `role_permissions` - 角色权限关联表

#### 内容相关
- `posts` - 博客文章表
- `categories` - 分类表
- `tags` - 标签表
- `post_tags` - 文章标签关联表
- `photos` - 摄影作品表
- `albums` - 相册表
- `photo_albums` - 作品相册关联表
- `products` - 产品表
- `product_plans` - 产品套餐表

#### 互动相关
- `comments` - 评论表
- `likes` - 点赞表
- `favorites` - 收藏表
- `donations` - 赞赏记录表

#### 订单相关
- `orders` - 订单表
- `payments` - 支付记录表

#### 系统相关
- `site_config` - 网站配置表
- `page_modules` - 页面模块配置表
- `operation_logs` - 操作日志表
- `statistics` - 统计数据表

### 4.2 数据库优化
- 索引优化（常用查询字段）
- 分表策略（日志表、统计表）
- 缓存策略（Redis缓存热点数据）
- 读写分离（主从复制）

---

## 5. 非功能性需求

### 5.1 性能要求
- 首屏加载时间 < 2秒
- 页面切换响应时间 < 500ms
- 图片加载优化（懒加载、WebP格式、CDN加速）
- 支持1000+并发用户

### 5.2 安全要求
- HTTPS加密传输
- SQL注入防护
- XSS攻击防护
- CSRF防护
- 密码加密存储
- 敏感信息脱敏
- 接口限流（防止恶意请求）
- 图片上传安全校验

### 5.3 可用性要求
- 系统可用性 > 99.5%
- 数据库定期备份（每日备份）
- 错误监控和告警（Sentry）
- 日志记录和分析

### 5.4 兼容性要求
- 浏览器兼容: Chrome、Firefox、Safari、Edge（最新两个版本）
- 移动端适配: iOS、Android
- 响应式设计: 支持桌面、平板、手机

### 5.5 SEO优化
- 服务端渲染（SSR）
- 语义化HTML
- Meta标签优化
- Sitemap生成
- 结构化数据（JSON-LD）
- 友好的URL结构

---

## 6. 开发计划

### 6.1 第一阶段（基础框架）- 2周
- 项目初始化（Next.js + TypeScript）
- 数据库设计和建表
- 用户认证系统（注册、登录）
- 后台管理框架搭建
- 基础UI组件库

### 6.2 第二阶段（核心功能）- 4周
- 门户主页开发
- 博客系统开发（前台+后台）
- 摄影画廊开发（前台+后台）
- 产品页面开发（前台+后台）

### 6.3 第三阶段（互动功能）- 2周
- 评论系统
- 点赞/收藏功能
- 赞赏功能（支付集成）
- 订阅购买流程

### 6.4 第四阶段（优化完善）- 2周
- 性能优化（缓存、CDN）
- SEO优化
- 安全加固
- 测试和Bug修复
- 部署上线

### 6.5 总计: 10周（约2.5个月）

---

## 7. 技术架构

### 7.1 前端架构
```
wylm-frontend/
├── app/                    # Next.js App Router
│   ├── (public)/          # 公开页面
│   │   ├── page.tsx       # 门户主页
│   │   ├── blog/          # 博客
│   │   ├── gallery/       # 摄影画廊
│   │   └── products/      # 产品页
│   ├── (auth)/            # 认证页面
│   │   ├── login/
│   │   └── register/
│   └── (admin)/           # 后台管理
│       └── dashboard/
├── components/            # 组件
│   ├── ui/               # UI组件
│   ├── layout/           # 布局组件
│   └── features/         # 功能组件
├── lib/                  # 工具库
├── hooks/                # 自定义Hooks
├── styles/               # 样式文件
└── public/               # 静态资源
```

### 7.2 后端架构
```
wylm-backend/
├── src/
│   ├── api/              # API路由
│   │   ├── auth/         # 认证相关
│   │   ├── blog/         # 博客相关
│   │   ├── gallery/      # 画廊相关
│   │   ├── products/     # 产品相关
│   │   └── admin/        # 管理相关
│   ├── models/           # 数据模型
│   ├── services/         # 业务逻辑
│   ├── middleware/       # 中间件
│   ├── utils/            # 工具函数
│   └── config/           # 配置文件
├── prisma/               # Prisma ORM
│   └── schema.prisma
└── tests/                # 测试文件
```

### 7.3 部署架构
```
[用户]
  ↓
[CDN] → [静态资源]
  ↓
[Nginx] → [负载均衡]
  ↓
[Next.js Server] ← [Redis缓存]
  ↓
[PostgreSQL] → [主从复制]
  ↓
[OSS存储] → [图片/视频]
```

---

## 8. 风险与挑战

### 8.1 技术风险
- **图片存储成本**: 大量高清图片存储和CDN流量成本较高
  - 解决方案: 图片压缩、WebP格式、按需加载

- **支付集成复杂度**: 微信/支付宝支付接入和回调处理
  - 解决方案: 使用成熟的支付SDK，充分测试

- **性能优化**: 大量图片和内容的加载性能
  - 解决方案: 懒加载、CDN、缓存策略

### 8.2 业务风险
- **内容审核**: 用户评论和上传内容的审核
  - 解决方案: 敏感词过滤、人工审核机制

- **支付安全**: 支付流程的安全性
  - 解决方案: HTTPS、签名验证、订单校验

### 8.3 运营风险
- **初期流量较低**: 网站初期访问量可能较少
  - 解决方案: SEO优化、社交媒体推广

---

## 9. 成功指标

### 9.1 技术指标
- 首屏加载时间 < 2秒
- 系统可用性 > 99.5%
- 移动端适配完成度 100%

### 9.2 业务指标
- 注册用户数 > 1000（3个月内）
- 日活跃用户 > 100（3个月内）
- 博客文章 > 50篇（3个月内）
- 摄影作品 > 200张（3个月内）

### 9.3 收入指标
- 月赞赏收入 > ¥1000（6个月内）
- 产品订阅用户 > 50（6个月内）

---

## 10. 附录

### 10.1 参考资料
- Next.js官方文档: https://nextjs.org/docs
- PostgreSQL文档: https://www.postgresql.org/docs/
- 微信支付文档: https://pay.weixin.qq.com/wiki/doc/api/
- 支付宝支付文档: https://opendocs.alipay.com/

### 10.2 设计参考
- 门户主页: https://zhheo.com/
- 博客页面: https://blog.zhheo.com/
- 摄影画廊: https://gallery.angyi.online/browse
- 产品页面: https://kafka.apache.org/

### 10.3 联系方式
- 项目负责人: [待填写]
- 技术负责人: [待填写]
- 设计负责人: [待填写]

---

**文档版本**: v1.0
**创建日期**: 2026-02-07
**最后更新**: 2026-02-07
**文档状态**: 待审核
